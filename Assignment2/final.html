<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="javascript:;">
                <img src="img/git_image.png" alt="" width="30" height="30">
                <span class="navbar-title">
                    GitHub Repos
                </span>
            </a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row mt-4">
            <div class="col-md-3">
                <div class="row">
                    <p style="font-size: 12px;line-height: 0px;font-weight: 600;">UserName</p>
                    <div class="col-md-6">
                        <input type="text" class="form-control" id="username" placeholder="Search by username"
                                    autofocus="" style="line-height: 1.6;font-size: 0.8rem;">
                    </div>
                    <div class="col-md-6">
                        <a href="javascript:;" class="btn btn-sm btn-primary" id="search-repos">Search</a>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-12">
                        <ul class="repo-list">
                          


                        </ul>
    
                    </div>
                </div>
            </div>
            <div class="col-md-9 ">
                <i class="fa fa-spinner fa-spin w-spinner"></i>
                <div class="row result1">
                    <div class="col-md-12">
                       
                        <p class="fs-6 mb-0 repo-name" style="font-weight: 700; font-size: 14px;"></p>
                         
                        <div class="card">
                            <h5 class="card-header" style="font-size: 13px;">
                                Overview
                            </h5>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <p class="mb-2 repo-desc" style="font-size: 13px;">Repo Desciption</p>
                                    </div>
                                   
                                    <div class="col-md-6">
                                      
                                        <div class="progress" >
                                            <div class="progress-bar bg-info w-75" >
                                            </div>
                                        </div>  
                                        <p class="pull-count mt-1" style="font-size: 12px;" >Hi</p>
                                    </div>
                                    <div class="col-md-6">

                                        <div class="progress">
                                            <div class="progress-bar bg-warning w-25">
                                            </div>
                                        </div>  
                                        <p class="active-issues mt-1" style="font-size: 12px;" >Hi</p>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="row">
                                    <div class="col-md-3 ">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-3 ">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-3 ">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-3 ">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="card-text" style="font-size: 14px;">
                                                    Card content
                                                </p>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                     
                        <div class="row">
                            <div class="col-md-3">
                            </div>
                            <div class="col-md-3">
                            </div>
                            <div class="col-md-3">
                            </div>
                            <div class="col-md-3">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                            </div>
                            <div class="col-md-6">
                            </div>
                        </div>
                        <hr   data-content="AND">
                        <p class="text-center" style="font-size: 14.5px;line-height: 0px;font-weight: 600;">Pull Request</p>  
                        <div class="row pull-requests" style="font-size: 13px;">
                           
                             
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

        <script>

            $(document).ready(function (){
                var   meta_Data;
                console.log("hi");
                $(".w-spinner").hide();
                $(".result1").hide();

                $("#search-repos").click(function () {
                    list_Repos();

                });


                $("#username").keypress(function (e) {
                    if (e.which == 13) {
                        list_Repos();
                    }
                });

                function list_Repos() {
                    console.log("hi");
                    $('.repo-list').empty();
                    $(".w-spinner").show();
                    var userName = $("#username").val();
                    console.log(userName);
                    var url = `https://api.github.com/users/${userName}/repos`;
                    $.get(url, function (data) {
                        meta_Data = data;
                        $(".w-spinner").hide();
                        $("#repo-list").show();
                        $.each(data, function (id, repo) {
                            console.log(id)
                            var html = `<li style="font-size: 12px; color: blueviolet;" class="repo-item" id="${repo.url}" data-id="${id}">${repo.full_name}</li>`;
                            $(".repo-list").append(html);
                            console.log(repo.full_name);
                        });
                    });
                }

                $(document).on('click', '.repo-item', function (e) {
                    e.preventDefault();
                    $(".pull-requests").empty();
                    $(".result1").show();
                    var idx = parseInt($(this).data("id"));
                    console.log(meta_Data[idx]);
                    $(".repo-name").text(meta_Data[idx].name);
                    $(".repo-desc").text(meta_Data[idx].description);
                    $(".active-issues").text(`${meta_Data[idx].open_issues_count} Active Issues`);
                  
                    
                    var pull_count;

                    var url1 = `${meta_Data[idx].url}/pulls?state=all`;
                    console.log(url1);
                    $.get(url1, function (data1) {
                        pull_count=data1.length;
                        $(".pull-count").text(`${pull_count} Active Pull Request`)

                        $.each(data1, function (id, repo) {
                            
                            var html=`   <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-12" style="font-size: 14px;font-weight: 600;">
                                            <i class="fa-solid fa-code-branch"></i>  ${repo.title}
                                        </div>
                                    </div>
                                    <div class="row" style="margin-left: 10px;font-size: 12px;">
                                        <div class="col-md-12">
                                            #${repo.number} Merged few hours ago
                                        </div>
                                    </div>
                                </div>
                           `;
                          //  var html = `<li style="font-size: 12px; font-weight: 700;">${repo.title}</li>`;
                            $(".pull-requests").append(html);

                        });
                    });
                    

                });



            });

              
            
        </script>
    
</body>
</html>