<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <Style>
        .navbar-title {
            font-size: 15px
        }


        ul li {
            position: relative;

        }

        .fa-times {
            right: 40px;
            color: red;
            cursor: pointer;
            position: absolute;
        }
    </Style>
</head>


<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="javascript:;">

                <span class="navbar-title">
                    To-Do List
                </span>
            </a>
        </div>
    </nav>


    <div class=" container mt-5">
        <div class="row">
            <div class="col-md-3  ">
                <div class="username-label">
                    Create List
                </div>

                <div class="repo-list">
                    <i class="fa fa-spinner fa-spin hidden repos-fetch-spinner"></i>
                </div>
            </div>
            <div class="col-md-9  ">

                <div class="row">
                    <div class="col-md-9">
                        <input type="text" class="form-control" id="to-do-item" placeholder="Enter To-Do Item"
                            autofocus>
                    </div>
                    <div class="col-md-3">
                        <a href="javascript:;" class="btn btn-sm btn-primary" id="add-item">Add</a>
                    </div>


                </div>

                <div class="row mt-5">
                    <div class="col-md-12">
                        <!-- Nav pills -->
                        <ul class="nav nav-pills" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="pill" href="#all">All</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="pill" href="#active">Active</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="pill" href="#complete">Completed</a>
                            </li>
                        </ul>

                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div id="all" class="container tab-pane active  mt-5  "><br>
                            </div>
                            <div id="active" class="container tab-pane fade  mt-5"><br>
                                 
                            </div>
                            <div id="complete" class="container tab-pane fade  mt-5"><br>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>



    <script>
        $(document).ready(function () {

            var todo_list = []
            var index = todo_list.length
            $('#to-do-item').change(function () {
                var input = $(this).val();

                todo_list.push({ 'idx': index, 'name': input, 'status': "incomplete" })
                console.log(todo_list)

                createNode()

                index++

                $(this).val('');

            })

            function createNode() {
                $('#all').empty()
                $('#active').empty()
                $('#complete').empty()
                for (var i = 0; i < todo_list.length; i++) {



                   

                    if(todo_list[i].status=='incomplete'){


                        var html = `<div data-id=${todo_list[i].idx} data-status=${todo_list[i].status}  class="row border align-items-center p-1 " style="line-height: 0px;">
                                <input class="check" type="checkbox"/> 
                                <p class="mt-3 pl-3">${todo_list[i].name}</p>
                                <i class="fa fa-times  " aria-hidden="true"></i>
                               </div>`

                          $('#all').append(html)
                        
                        $('#active').append(html)
                    }

                    if(todo_list[i].status=='complete'){
                        var html1 = `<div data-id=${todo_list[i].idx} data-status=${todo_list[i].status}  class="row border align-items-center p-1 " style="line-height: 0px;">
                                <input class="check" type="checkbox" checked/> 
                                <p class="mt-3 pl-3" style="text-decoration: line-through">${todo_list[i].name}</p>
                                <i class="fa fa-times  " aria-hidden="true"></i>
                               </div>`
                               $('#all').append(html1)
                        $('#complete').append(html1)
                    }
                }


               

            }




            $(document).on('click', '.fa-times', function () {

                var id = $(this).parent().data("id");

                
                
                console.log(id, "Removed", todo_list)

                todo_list = todo_list.filter(object => object.idx != id);
                createNode()

            });

            $(document).on('click', '.check', function () {

                var id = $(this).parent().data("id");

                
                const index = todo_list.findIndex(object => {
                        return object.idx === id;
                    });


                console.log(id, "Complete",todo_list)
                todo_list[index].status="complete"
                console.log(id, "Complete",todo_list)
                createNode()
                

                



            });



        });
    </script>
</body>

</html>